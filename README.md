# 总结页面更新说明

## 主要修改

1. **修改了总结页面数据统计逻辑**
   - 现在任务完成率、冥想时间和番茄钟数量都只统计当天的数据
   - 每天初始值都为0，重新开始计算
   
2. **添加了任务完成时间戳**
   - 在TaskScreen中添加了`completedAt`字段，记录任务完成的具体时间
   - 在NotificationService中也添加了相同逻辑，确保通知完成任务时也记录时间戳
   
3. **添加了每日重置功能**
   - 新增`checkDailyReset`函数，在每天第一次进入页面时执行重置
   - 重置番茄钟计数，但保留历史记录
   - 自动将昨天的"明日计划"转移到当天任务列表
   
4. **修改了番茄钟保存方式**
   - 在FocusScreen中，每完成一个番茄钟，都会记录日期和时间信息
   - 以数组形式保存到AsyncStorage中，便于按日期统计

## 数据结构

### 任务数据
```javascript
{
  id: "1234567890",
  text: "任务内容",
  completed: true,
  completedAt: "2023-01-01T12:00:00.000Z", // 完成时间ISO格式
  // 其他字段...
}
```

### 番茄钟数据
```javascript
[
  {
    id: "1234567890",
    date: "2023-01-01", // YYYY-MM-DD格式
    duration: 25, // 时长（分钟）
    timestamp: "2023-01-01T12:00:00.000Z" // 完成时间ISO格式
  },
  // 更多番茄钟记录...
]
```

## 总体效果

- 现在，总结页面只显示当天的进度数据
- 每天初始都从0开始重新计算
- 不再累计显示历史数据
- 便于用户专注于当天的工作情况

## 环境变量配置

项目使用 `.env` 文件存储环境变量，如API密钥等敏感信息。

1. 复制 `.env.example` 文件并重命名为 `.env`
2. 在 `.env` 文件中填入你的API密钥和其他配置

注意：`.env` 文件不应该提交到版本控制系统中。 